:root {
  --bg: #06070B;
  --bg-surface: #0C0D14;
  --bg-elevated: #12131C;
  --bg-hover: #181A26;
  --bg-glass: rgba(6, 7, 11, 0.88);
  --accent: #00FF88;
  --accent-dim: rgba(0, 255, 136, 0.1);
  --accent-glow: rgba(0, 255, 136, 0.05);
  --accent-bright: rgba(0, 255, 136, 0.25);
  --cyan: #00D4FF;
  --cyan-dim: rgba(0, 212, 255, 0.08);
  --text: #B8BCC8;
  --text-bright: #E4E8F0;
  --text-dim: #5C6078;
  --text-ghost: #404358;
  --border: rgba(255, 255, 255, 0.05);
  --border-accent: rgba(0, 255, 136, 0.12);
  --track: rgba(0, 255, 136, 0.1);
}

/* ═══ DETAIL LEVELS ═══ */
body.detail-1 {
  --reveal-duration: 0s; --reveal-ease: linear;
  --hover-lift: 0px; --glow-mult: 0.5;
}
body.detail-2 {
  --reveal-duration: 0.6s; --reveal-ease: cubic-bezier(0.16,1,0.3,1);
  --hover-lift: -2px; --glow-mult: 1;
}
body.detail-3 {
  --reveal-duration: 0.4s; --reveal-ease: cubic-bezier(0.16,1,0.3,1);
  --hover-lift: 0px; --glow-mult: 0;
  --accent: #FF006E;
  --accent-dim: rgba(255, 0, 110, 0.06);
  --accent-glow: rgba(255, 0, 110, 0.03);
  --accent-bright: rgba(255, 0, 110, 0.12);
  --border-accent: rgba(255, 0, 110, 0.25);
  --cyan: #FF006E;
  --bg: #E8E3DC;
  --bg-surface: #FFFFFF;
  --bg-elevated: #FFFFFF;
  --bg-glass: rgba(232, 227, 220, 0.95);
  --bg-hover: #F8F6F3;
  --text: #1A1A1A;
  --text-bright: #000000;
  --text-dim: #555555;
  --text-ghost: #999999;
  --border: rgba(0, 0, 0, 0.08);
  --track: rgba(255, 0, 110, 0.25);
}

* { margin: 0; padding: 0; box-sizing: border-box; }
html { scroll-behavior: smooth; }
body {
  font-family: 'Space Mono', monospace;
  background: var(--bg); color: var(--text);
  line-height: 1.6; -webkit-font-smoothing: antialiased;
  overflow-x: hidden;
}
::selection { background: var(--accent-bright); color: var(--bg); }

::-webkit-scrollbar { width: 3px; }
::-webkit-scrollbar-track { background: var(--bg); }
::-webkit-scrollbar-thumb { background: var(--accent-dim); }

/* ═══ REVEAL ═══ */
.reveal {
  opacity: 0; transform: translateY(20px);
  transition: opacity var(--reveal-duration) var(--reveal-ease), transform var(--reveal-duration) var(--reveal-ease);
}
.reveal.visible { opacity: 1; transform: translateY(0); }
.kw-reveal { display: inline-flex; }

/* ═══ GLOW CARD — mouse-tracking radial glow ═══ */
.glow-card {
  position: relative;
  border: 1px solid var(--border);
  background: var(--bg-surface);
  transition: border-color 0.35s, box-shadow 0.35s;
  overflow: hidden;
  text-decoration: none;
  color: inherit;
  display: block;
}
.glow-card::before, .glow-card::after { display: none; }
.glow-card:is(:hover,.th) {
  border-color: var(--border-accent);
  box-shadow: 0 4px 20px rgba(0,0,0,0.3);
}

/* ═══ LOADING ═══ */
.loading-screen {
  display: flex; flex-direction: column; align-items: center;
  justify-content: center; min-height: 100vh; gap: 2rem; background: var(--bg);
}
.loading-helix { position: relative; width: 40px; height: 40px; }
.helix-dot {
  position: absolute; width: 8px; height: 8px; border-radius: 50%;
  animation: helixSpin 1.4s ease-in-out infinite;
}
.d1 { background: var(--accent); top: 0; left: 50%; transform: translateX(-50%); }
.d2 { background: var(--cyan); bottom: 0; left: 50%; transform: translateX(-50%); animation-delay: 0.35s; }
.d3 { background: var(--accent); left: 0; top: 50%; transform: translateY(-50%); animation-delay: 0.7s; opacity: 0.5; }
.d4 { background: var(--cyan); right: 0; top: 50%; transform: translateY(-50%); animation-delay: 1.05s; opacity: 0.5; }
@keyframes helixSpin { 0%,100% { transform: scale(1); opacity: 1; } 50% { transform: scale(0.3); opacity: 0.3; } }
.loading-text { font-size: 0.75rem; color: var(--accent); letter-spacing: 0.08em; }
.cursor { animation: blink 0.8s step-end infinite; color: var(--accent); font-weight: 700; }
@keyframes blink { 50% { opacity: 0; } }

.error-screen {
  display: flex; flex-direction: column; align-items: center;
  justify-content: center; min-height: 100vh; gap: 1rem; text-align: center; padding: 2rem;
}
.error-screen h2 { color: var(--accent); font-size: 0.9rem; letter-spacing: 0.1em; }
.error-screen p { color: var(--text-dim); font-size: 0.75rem; max-width: 400px; }
.retry-btn {
  background: var(--accent); color: var(--bg); border: none;
  padding: 0.55rem 1.8rem; font-family: 'Space Mono', monospace;
  font-size: 0.75rem; font-weight: 700; letter-spacing: 0.06em;
  text-transform: uppercase; cursor: pointer; transition: all 0.2s;
}
.retry-btn:hover { box-shadow: 0 0 16px var(--accent-dim); }

/* ═══ PAGE ═══ */
.portfolio { opacity: 0; animation: fadeIn 0.4s ease forwards; }
@keyframes fadeIn { to { opacity: 1; } }

/* ═══ HERO — compact ═══ */
.hero {
  position: relative;
  padding: 4rem 2rem 3rem;
  overflow: hidden;
}
.hero-bg {
  position: absolute; inset: 0;
  background:
    radial-gradient(ellipse at 10% 90%, rgba(0,255,136,0.05) 0%, transparent 50%),
    radial-gradient(ellipse at 90% 10%, rgba(0,212,255,0.03) 0%, transparent 50%);
}
.hero-grid {
  position: absolute; inset: -20% 0;
  background-image:
    linear-gradient(var(--border) 1px, transparent 1px),
    linear-gradient(90deg, var(--border) 1px, transparent 1px);
  background-size: 80px 80px;
  mask-image: radial-gradient(ellipse at 30% 70%, rgba(0,0,0,0.3) 0%, transparent 60%);
  -webkit-mask-image: radial-gradient(ellipse at 30% 70%, rgba(0,0,0,0.3) 0%, transparent 60%);
  will-change: transform;
}
.dna-canvas {
  position: absolute; inset: 0; width: 100%; height: 100%;
  pointer-events: none; z-index: 0;
}
.hero-inner {
  position: relative; z-index: 2;
  max-width: 880px; margin: 0 auto; width: 100%;
}
.hero-prompt {
  font-size: 0.6rem; color: var(--accent);
  letter-spacing: 0.08em; margin-bottom: 0.75rem; min-height: 1.2em;
}
.hero-name {
  font-family: 'Syne', sans-serif;
  font-size: clamp(2.8rem, 8vw, 5rem);
  font-weight: 800; line-height: 0.92;
  letter-spacing: -0.04em; margin-bottom: 1rem;
}
.hero-name-line {
  display: block; color: var(--text-bright);
  opacity: 0; animation: nameReveal 0.7s cubic-bezier(0.16,1,0.3,1) forwards;
}
.hero-name-line.accent {
  color: var(--accent);
  text-shadow: 0 0 40px var(--accent-glow), 0 0 80px rgba(0,255,136,0.02);
}
@keyframes nameReveal {
  from { opacity: 0; transform: translateY(24px) skewY(1.5deg); }
  to { opacity: 1; transform: translateY(0) skewY(0); }
}
.hero-bio {
  font-size: 0.75rem; color: var(--text-dim);
  max-width: 480px; line-height: 1.7;
  opacity: 0; animation: fadeIn 0.6s ease 0.7s forwards;
}
.hero-bio strong { color: var(--text); font-weight: 700; }
.hero-stats {
  display: flex; flex-wrap: wrap; gap: 0.4rem; margin-top: 1.25rem;
  opacity: 0; animation: fadeIn 0.6s ease 0.9s forwards;
}
.stat {
  display: inline-flex; align-items: center; gap: 0.4rem;
  padding: 0.35rem 0.75rem; background: var(--bg-surface);
  border: 1px solid var(--border); font-size: 0.6rem; color: var(--text-dim);
  white-space: nowrap; transition: all 0.25s;
}
.stat { cursor: default; }
.stat--id { cursor: pointer; }
.stat--id:is(:hover,.th) { border-color: var(--border-accent); background: var(--bg-elevated); }
.stat a { color: inherit; text-decoration: none; }
.stat .val { color: var(--accent); font-weight: 700; }
.stat--id { border-color: var(--border-accent); background: var(--accent-dim); }
.stat--id a { color: var(--accent); }

/* ═══ NAV ═══ */
.nav {
  position: sticky; top: 0; z-index: 100;
  background: var(--bg-glass); backdrop-filter: blur(20px);
  border-bottom: 1px solid var(--border); padding: 0 2rem;
  transition: border-color 0.3s;
}
.nav--scrolled { border-bottom-color: var(--border-accent); }
.nav-inner {
  max-width: 880px; margin: 0 auto;
  display: flex; flex-wrap: wrap; justify-content: center; gap: 0; scrollbar-width: none;
}
.nav-inner::-webkit-scrollbar { display: none; }
.nav-a {
  font-size: 0.6rem; letter-spacing: 0.1em; text-transform: uppercase;
  color: var(--text-ghost); text-decoration: none;
  padding: 0.35rem 0.5rem; white-space: nowrap;
  border-bottom: 1px solid transparent; transition: all 0.2s;
  position: relative;
}
.nav-a:is(:hover,.th) { color: var(--accent); }
.nav-a:is(:hover,.th)::after {
  content: ''; position: absolute; bottom: -1px; left: 1rem; right: 1rem;
  height: 1px; background: var(--accent); box-shadow: 0 0 8px var(--accent-dim);
}

/* Nav level switcher */
.nav-levels {
  display: flex; align-items: center; justify-content: center; gap: 2px;
  padding: 0.35rem 0 0.4rem;
}
.nav-lvl {
  width: 22px; height: 22px;
  display: flex; align-items: center; justify-content: center;
  font-family: 'Space Mono', monospace;
  font-size: 0.55rem; font-weight: 700;
  background: transparent; color: var(--text-ghost);
  border: 1px solid var(--border); cursor: pointer;
  transition: all 0.2s; padding: 0;
}
.nav-lvl:hover { color: var(--text); border-color: var(--text-ghost); }
.nav-lvl.active {
  color: var(--accent); border-color: var(--accent);
  background: var(--accent-dim);
}

/* ═══ SECTIONS ═══ */
.section { max-width: 880px; margin: 0 auto; padding: 3.5rem 2rem; }
.section + .section { padding-top: 0.5rem; }
.sec-head { display: flex; align-items: baseline; gap: 0.75rem; margin-bottom: 2.5rem; }
.sec-label { display: none; }
.sec-title {
  font-family: 'Syne', sans-serif; font-size: 1.8rem; font-weight: 800;
  color: var(--text-bright); letter-spacing: -0.02em;
}
.sec-line { flex: 1; height: 1px; background: linear-gradient(to right, var(--border), transparent); margin-top: 0.15rem; }
.sec-count { font-size: 0.65rem; color: var(--text-dim); letter-spacing: 0.05em; }

/* ═══ SNAKE TIMELINE ═══ */
.snake { position: relative; display: flex; flex-direction: column; }
.snake-row {
  display: grid; grid-template-columns: 1fr 40px 1fr;
  min-height: 80px; position: relative;
}
.snake-track {
  position: relative; display: flex; align-items: center;
  justify-content: center; grid-column: 2;
}
.snake-track::before {
  content: ''; position: absolute; top: 0; bottom: 0;
  left: 50%; width: 1px; background: var(--track); transform: translateX(-50%);
}
.snake-track.last::before { bottom: 50%; }
.snake-track::after {
  content: ''; position: absolute; top: 50%;
  height: 1px; width: 50%; background: var(--track);
}
.snake-track.left::after { left: 50%; }
.snake-track.right::after { right: 50%; }
.snake-node {
  width: 9px; height: 9px; background: var(--bg);
  border: 2px solid var(--text-ghost);
  border-radius: 50%; z-index: 2; position: relative; transition: all 0.3s;
}
.snake-node.now {
  border-color: var(--accent); background: var(--accent);
  box-shadow: 0 0 10px var(--accent-dim), 0 0 3px var(--accent);
  animation: pulse 2.5s ease-in-out infinite;
}
@keyframes pulse {
  0%,100% { box-shadow: 0 0 calc(10px * var(--glow-mult)) var(--accent-dim), 0 0 calc(3px * var(--glow-mult)) var(--accent); }
  50% { box-shadow: 0 0 calc(24px * var(--glow-mult)) var(--accent-bright), 0 0 calc(8px * var(--glow-mult)) var(--accent); }
}
body.detail-1 .snake-node.now { animation: none; box-shadow: none; }
.snake-card {
  padding: 0.85rem 1.25rem; cursor: default;
  border: none; border-radius: 8px;
  background: var(--bg-surface);
  box-shadow: none;
  position: relative;
  transition: background 0.3s, transform 0.3s cubic-bezier(0.16,1,0.3,1);
}
.snake-card::before, .snake-card::after { display: none; }
.snake-card:is(:hover,.th) {
  background: var(--bg-elevated);
  transform: translateY(var(--hover-lift));
}
.snake-role {
  transition: color 0.3s;
}
.snake-card:is(:hover,.th) .snake-role { color: var(--accent); }
.snake-card:is(:hover,.th) .snake-dates { color: var(--text-dim); }
.snake-card.left {
  grid-column: 1; grid-row: 1; text-align: right; border-right-color: var(--track);
}
.snake-card.right {
  grid-column: 3; grid-row: 1; text-align: left; border-left-color: var(--track);
}
.snake-dates { font-size: 0.6rem; color: var(--text-ghost); letter-spacing: 0.04em; margin-bottom: 0.15rem; position: relative; z-index: 1; }
.snake-loc { opacity: 0.6; }
.snake-role {
  font-family: 'Syne', sans-serif; font-size: 0.9rem; font-weight: 600;
  color: var(--text-bright); line-height: 1.3; position: relative; z-index: 1;
}
.snake-org { font-size: 0.75rem; color: var(--accent); margin-top: 0.1rem; position: relative; z-index: 1; }
.snake-dept { font-size: 0.75rem; color: var(--text-dim); margin-top: 0.05rem; position: relative; z-index: 1; }

/* ═══ PUBLICATION CARDS ═══ */
.pub-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1.25rem;
}
.pub-grid > .reveal { display: flex; }
.pub-card {
  padding: 1.4rem 1.5rem;
  display: flex; flex-direction: column;
  gap: 0.5rem;
  min-height: 140px;
  cursor: pointer;
  flex: 1;
  border-top: 1px solid var(--text-ghost);
  border-left: none; border-right: none; border-bottom: none;
}
.pub-card:is(:hover,.th) {
  border-top-color: var(--accent);
}
.pub-card .pub-card-top {
  display: flex; justify-content: space-between; align-items: center;
  position: relative; z-index: 1;
}
.pub-year {
  font-family: 'Syne', sans-serif;
  font-size: 1.5rem; font-weight: 800; color: var(--accent);
  line-height: 1; transition: text-shadow 0.3s;
}
.pub-card:is(:hover,.th) .pub-year { text-shadow: 0 0 10px rgba(0,255,136,0.15); }
.pub-type {
  font-size: 0.6rem; color: var(--text-ghost);
  text-transform: uppercase; letter-spacing: 0.1em;
  padding: 0.2rem 0.5rem; border: 1px solid var(--border);
  transition: all 0.3s;
}
.pub-card:is(:hover,.th) .pub-type { border-color: var(--border-accent); color: var(--accent); background: var(--accent-dim); }
.pub-title {
  font-family: 'Syne', sans-serif;
  font-size: 0.9rem; color: var(--text-bright);
  font-weight: 600; line-height: 1.4;
  position: relative; z-index: 1;
  flex: 1;
}
.pub-journal {
  font-size: 0.75rem; color: var(--cyan); font-style: italic;
  position: relative; z-index: 1;
}
.pub-lab {
  font-size: 0.6rem; color: var(--text-dim); letter-spacing: 0.04em;
  position: relative; z-index: 1;
}
.pub-arrow {
  position: absolute; bottom: 1rem; right: 1rem;
  width: 28px; height: 28px;
  display: flex; align-items: center; justify-content: center;
  color: var(--text-ghost); z-index: 1;
  opacity: 0; transform: translate(-4px, 4px);
  transition: all 0.35s cubic-bezier(0.16,1,0.3,1);
}
.pub-arrow svg { width: 16px; height: 16px; }
.pub-card:is(:hover,.th) .pub-arrow {
  opacity: 1; transform: translate(0, 0); color: var(--accent);
}

/* ═══ KEYWORDS ═══ */
.kw-wrap { display: flex; flex-wrap: wrap; gap: 0.5rem; }
.kw {
  padding: 0.4rem 1rem; background: transparent;
  border: 1px solid var(--text-ghost); border-radius: 100px;
  font-size: 0.7rem; color: var(--text); letter-spacing: 0.02em;
  transition: all 0.3s cubic-bezier(0.16,1,0.3,1); cursor: default;
}
.kw:is(:hover,.th) {
  border-color: var(--accent); color: var(--accent);
  background: var(--accent-dim);
  transform: translateY(var(--hover-lift));
  box-shadow: 0 4px 12px rgba(0,255,136,calc(0.1 * var(--glow-mult)));
}

/* ═══ STACK EXCHANGE ═══ */
.se-site-group { margin-bottom: 2rem; }
.se-site-group:last-child { margin-bottom: 0.5rem; }
.se-site-header {
  display: flex; align-items: center; gap: 0.5rem;
  margin-bottom: 1rem; padding-bottom: 0.5rem;
  border-bottom: 1px solid var(--border);
  flex-wrap: wrap;
}
.se-site-name {
  font-family: 'Syne', sans-serif; font-size: 0.95rem;
  font-weight: 700; color: var(--text-bright);
}
.se-site-rep {
  font-size: 0.6rem; color: var(--cyan); font-weight: 700;
  letter-spacing: 0.05em; padding: 0.2rem 0.5rem;
  background: var(--cyan-dim); border: 1px solid rgba(0,212,255,0.15);
}
.se-site-line { flex: 1; height: 1px; background: linear-gradient(to right, var(--border), transparent); }
.se-site-stats {
  display: flex; gap: 0.5rem; font-size: 0.6rem;
  color: var(--text-dim); letter-spacing: 0.04em;
}

.se-list {
  display: flex; flex-direction: column; gap: 0.5rem;
}

.se-card {
  display: flex; align-items: center; gap: 1.2rem;
  padding: 0.85rem 1.1rem; cursor: pointer;
  border-left: 2px solid rgba(0,212,255,0.2);
  background: linear-gradient(135deg, rgba(0,212,255,0.02) 0%, var(--bg-surface) 60%);
}
.se-card:is(:hover,.th) {
  border-color: rgba(0,212,255,0.15);
  border-left-color: var(--cyan);
}

.se-votes {
  display: flex; flex-direction: column; align-items: center;
  width: 56px; flex-shrink: 0;
  position: relative; z-index: 1;
}
.se-score {
  font-family: 'Syne', sans-serif; font-size: 1.5rem;
  font-weight: 800; color: var(--cyan); line-height: 1;
}
.se-vote-label {
  font-size: 0.5rem; color: var(--text-dim);
  text-transform: uppercase; letter-spacing: 0.1em;
  margin-top: 0.15rem;
}
.se-card:is(:hover,.th) .se-score { text-shadow: 0 0 10px rgba(0,212,255,0.15); }

.se-body {
  flex: 1; min-width: 0;
  position: relative; z-index: 1;
}
.se-meta {
  display: flex; align-items: center; gap: 0.4rem;
  margin-bottom: 0.25rem;
}
.se-type-badge {
  display: inline-flex; align-items: center; justify-content: center;
  width: 20px; height: 20px; font-size: 0.6rem; font-weight: 800;
  flex-shrink: 0;
}
.se-type-q {
  background: var(--cyan-dim); color: var(--cyan);
  border: 1px solid rgba(0,212,255,0.15);
}
.se-type-a {
  background: var(--accent-dim); color: var(--accent);
  border: 1px solid var(--border-accent);
}
.se-type-accepted {
  background: var(--accent); color: var(--bg);
  border-color: var(--accent);
}
.se-views {
  font-size: 0.6rem; color: var(--text);
  letter-spacing: 0.04em;
}
.se-accepted {
  font-size: 0.5rem; color: var(--accent);
  text-transform: uppercase; letter-spacing: 0.08em; font-weight: 700;
}
.se-title {
  font-family: 'Syne', sans-serif; font-size: 0.88rem;
  color: var(--text-bright); font-weight: 700; line-height: 1.35;
}
.se-tags {
  display: flex; flex-wrap: wrap; gap: 0.2rem;
  margin-top: 0.3rem;
}
.se-tag {
  padding: 0.15rem 0.45rem; font-size: 0.55rem;
  color: rgba(0,212,255,0.8); background: rgba(0,212,255,0.06);
  border: 1px solid rgba(0,212,255,0.12); letter-spacing: 0.02em;
  transition: border-color 0.25s, background 0.25s, color 0.25s;
}
.se-card:is(:hover,.th) .se-tag { border-color: rgba(0,212,255,0.25); color: var(--cyan); background: rgba(0,212,255,0.1); }

.se-arrow {
  width: 24px; height: 24px; flex-shrink: 0;
  display: flex; align-items: center; justify-content: center;
  color: var(--text-ghost); position: relative; z-index: 1;
  opacity: 0; transform: translate(-4px, 0);
  transition: all 0.35s cubic-bezier(0.16,1,0.3,1);
}
.se-arrow svg { width: 14px; height: 14px; }
.se-card:is(:hover,.th) .se-arrow { opacity: 1; transform: translate(0, 0); color: var(--cyan); }

.se-total {
  font-size: 0.6rem; color: var(--text-ghost);
  text-align: center; letter-spacing: 0.06em;
  padding-top: 0.5rem;
}

/* ═══ LINKS ═══ */
.links-list {
  display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
  gap: 0.75rem;
}
.lnk {
  display: flex; align-items: center; gap: 0.85rem;
  padding: 1rem 1.1rem;
  border: none; border-bottom: 2px solid var(--text-ghost);
  background: transparent;
}
.lnk:is(:hover,.th) {
  border-bottom-color: var(--accent);
  background: var(--accent-dim);
  box-shadow: none;
}
.lnk-icon {
  width: 36px; height: 36px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  background: var(--bg-elevated); color: var(--text-dim); flex-shrink: 0;
  border: 1px solid var(--border);
  position: relative; z-index: 1;
  transition: all 0.3s;
}
.lnk:is(:hover,.th) .lnk-icon { background: var(--accent); color: var(--bg); border-color: var(--accent); }
.lnk-name { font-size: 0.75rem; font-weight: 700; color: var(--text-bright); position: relative; z-index: 1; }
.lnk-url { font-size: 0.6rem; color: var(--text-dim); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; position: relative; z-index: 1; }

/* ═══ FOOTER ═══ */
.footer {
  max-width: 880px; margin: 0 auto;
  padding: 2.5rem 2rem 4rem;
  display: flex; justify-content: space-between;
  align-items: center; flex-wrap: wrap; gap: 1rem;
  border-top: 1px solid var(--border);
}
.footer-l { font-size: 0.6rem; color: var(--text-ghost); }
.footer-l a { color: var(--accent); text-decoration: none; }
.footer-l a:hover { text-decoration: underline; }
.footer-r { font-size: 0.6rem; color: var(--text-dim); }

/* ═══ DETAIL LEVEL OVERRIDES ═══ */

/* Level 1: GEOCITIES MODE */
@keyframes geocities-blink {
  0%, 49% { visibility: visible; }
  50%, 100% { visibility: hidden; }
}
@keyframes geocities-rainbow {
  0% { color: #FF0000; }
  17% { color: #FF8800; }
  33% { color: #FFFF00; }
  50% { color: #00FF00; }
  67% { color: #0088FF; }
  83% { color: #FF00FF; }
  100% { color: #FF0000; }
}
@keyframes marquee-scroll {
  from { transform: translateX(100%); }
  to { transform: translateX(-100%); }
}

body.detail-1 {
  background: #000033;
  color: #FFFF00;
  font-family: 'Comic Sans MS', 'Comic Sans', 'Chalkboard SE', 'Marker Felt', cursive;
  line-height: 1.5;
  cursor: crosshair;
  background-image:
    radial-gradient(1px 1px at 10% 15%, #FFFFFF 50%, transparent 50%),
    radial-gradient(1px 1px at 25% 40%, rgba(255,255,255,0.7) 50%, transparent 50%),
    radial-gradient(1px 1px at 40% 10%, #FFFFFF 50%, transparent 50%),
    radial-gradient(1px 1px at 55% 60%, rgba(255,255,255,0.5) 50%, transparent 50%),
    radial-gradient(1px 1px at 70% 25%, #FFFFFF 50%, transparent 50%),
    radial-gradient(1px 1px at 85% 50%, rgba(255,255,255,0.6) 50%, transparent 50%),
    radial-gradient(1px 1px at 15% 70%, rgba(255,255,255,0.8) 50%, transparent 50%),
    radial-gradient(1px 1px at 50% 85%, #FFFFFF 50%, transparent 50%),
    radial-gradient(1px 1px at 90% 75%, rgba(255,255,255,0.4) 50%, transparent 50%),
    radial-gradient(1px 1px at 35% 95%, rgba(255,255,255,0.7) 50%, transparent 50%),
    radial-gradient(1px 1px at 5% 50%, rgba(255,255,255,0.5) 50%, transparent 50%),
    radial-gradient(1px 1px at 65% 5%, #FFFFFF 50%, transparent 50%),
    radial-gradient(1px 1px at 78% 88%, rgba(255,255,255,0.6) 50%, transparent 50%),
    radial-gradient(1px 1px at 20% 30%, rgba(255,255,255,0.9) 50%, transparent 50%),
    radial-gradient(1px 1px at 92% 12%, rgba(255,255,255,0.5) 50%, transparent 50%);
  background-color: #000033;
}
body.detail-1 .dna-canvas { display: none; }
body.detail-1 .hero-bg { display: none; }
body.detail-1 .hero-grid { display: none; }
body.detail-1 .portfolio { animation: none; opacity: 1; }
body.detail-1 .reveal { opacity: 1; transform: none; transition: none; }
body.detail-1 .reveal.visible { transform: none; }

/* Hero */
body.detail-1 .hero {
  text-align: center;
  border: 4px outset #808080;
  margin: 0.5rem;
  padding: 2rem 1.5rem;
}
body.detail-1 .hero-inner { text-align: center; }
body.detail-1 .hero-prompt { color: #00FFFF; text-align: center; }
body.detail-1 .hero-name {
  font-family: 'Comic Sans MS', 'Comic Sans', 'Chalkboard SE', 'Marker Felt', cursive;
}
body.detail-1 .hero-name-line {
  animation: none; opacity: 1;
  color: #FF00FF;
  text-shadow:
    2px 2px 0 #FF0000,
    -2px -2px 0 #0000FF,
    2px -2px 0 #00FF00,
    -2px 2px 0 #FFFF00;
}
body.detail-1 .hero-name-line.accent {
  color: #00FF00;
  text-shadow:
    2px 2px 0 #FF0000,
    -2px -2px 0 #0000FF,
    2px -2px 0 #FF00FF,
    -2px 2px 0 #FFFF00;
}
body.detail-1 .hero-bio {
  animation: none; opacity: 1;
  color: #FFFFFF;
  max-width: none; margin: 0 auto; text-align: center;
}
body.detail-1 .hero-bio strong { color: #00FFFF; }
body.detail-1 .hero-stats { animation: none; opacity: 1; justify-content: center; }

/* Geocities banner */
.geo-banner { position: relative; z-index: 2; text-align: center; padding: 0.5rem; }
.geo-marquee {
  overflow: hidden;
  background: #000066;
  border: 2px outset #808080;
  padding: 0.25rem 0;
  margin-bottom: 0.5rem;
}
.geo-marquee span {
  display: inline-block;
  white-space: nowrap;
  animation: marquee-scroll 15s linear infinite;
  color: #FFFF00;
  font-size: 0.85rem;
}
.geo-construction {
  color: #FF0000;
  font-size: 1.2rem;
  font-weight: bold;
  animation: geocities-blink 1s step-end infinite;
  letter-spacing: 0.1em;
}
.geo-badge {
  text-align: center;
  color: #00FFFF;
  font-size: 0.7rem;
  font-family: 'Comic Sans MS', 'Comic Sans', 'Chalkboard SE', 'Marker Felt', cursive;
  padding: 0.5rem;
  border: 1px outset #808080;
  background: #000066;
  margin-top: 0.5rem;
}

/* Nav */
body.detail-1 .nav {
  background: #000066; backdrop-filter: none;
  border: 3px outset #808080;
  border-bottom: 3px outset #808080;
}
body.detail-1 .nav-a {
  color: #FFFF00; text-decoration: none;
  font-family: 'Comic Sans MS', 'Comic Sans', 'Chalkboard SE', 'Marker Felt', cursive;
  text-transform: uppercase; letter-spacing: 0.05em; font-size: 0.85rem;
  font-weight: bold;
}
body.detail-1 .nav-a:hover { color: #00FF00; }
body.detail-1 .nav-a:hover::after { display: none; }
body.detail-1 .nav-lvl {
  font-family: 'Comic Sans MS', 'Comic Sans', 'Chalkboard SE', 'Marker Felt', cursive;
  border: 2px outset #808080; color: #FFFF00;
  background: #000066;
}
body.detail-1 .nav-lvl:hover { border-style: inset; color: #00FF00; }
body.detail-1 .nav-lvl.active {
  border-style: inset; color: #00FF00;
  background: #000099;
}

/* Sections */
body.detail-1 .section { max-width: none; }
body.detail-1 .sec-head { justify-content: center; }
body.detail-1 .sec-title {
  font-family: 'Comic Sans MS', 'Comic Sans', 'Chalkboard SE', 'Marker Felt', cursive;
  color: #00FFFF;
  font-size: 1.8rem;
  text-align: center;
}
body.detail-1 .sec-line {
  background: linear-gradient(to right, #FF0000, #FF8800, #FFFF00, #00FF00, #0088FF, #FF00FF);
  height: 3px;
}
body.detail-1 .sec-count { color: #FFFF00; }
body.detail-1 .sec-label {
  display: block;
  font-family: 'Comic Sans MS', 'Comic Sans', 'Chalkboard SE', 'Marker Felt', cursive;
  font-size: 3rem; font-weight: bold;
  color: #FFFF00;
}

/* Cards - beveled Geocities style */
body.detail-1 .snake-card {
  background: #000066; border-radius: 0;
  border: 3px outset #808080;
}
body.detail-1 .snake-card:hover {
  border-style: inset; transform: none;
}
body.detail-1 .snake-card:hover .snake-role { color: #00FF00; }
body.detail-1 .snake-role {
  font-family: 'Comic Sans MS', 'Comic Sans', 'Chalkboard SE', 'Marker Felt', cursive;
  color: #FFFFFF;
}
body.detail-1 .snake-org { color: #FF00FF; }
body.detail-1 .snake-dept { color: #00FFFF; }
body.detail-1 .snake-dates { color: #FFFF00; }
body.detail-1 .snake-node { border-color: #FFFF00; background: #000033; }
body.detail-1 .snake-node.now {
  border-color: #00FF00; background: #00FF00;
  box-shadow: 0 0 8px #00FF00; animation: none;
}
body.detail-1 .snake-track::before { background: #FFFF00; }
body.detail-1 .snake-track::after { background: #FFFF00; }

/* Pub cards */
body.detail-1 .pub-card {
  background: #000066;
  border: 3px outset #808080;
  border-top: 3px outset #808080;
}
body.detail-1 .pub-card:hover {
  border-style: inset; border-top-style: inset; box-shadow: none;
}
body.detail-1 .pub-card:hover .pub-year { text-shadow: none; }
body.detail-1 .pub-year {
  font-family: 'Comic Sans MS', 'Comic Sans', 'Chalkboard SE', 'Marker Felt', cursive;
  color: #00FF00;
}
body.detail-1 .pub-title {
  font-family: 'Comic Sans MS', 'Comic Sans', 'Chalkboard SE', 'Marker Felt', cursive;
  color: #FFFFFF;
}
body.detail-1 .pub-type {
  color: #FFFF00; border: 2px outset #808080;
  background: #000099;
}
body.detail-1 .pub-card:hover .pub-type {
  border-style: inset; color: #FFFF00; background: #000099;
}
body.detail-1 .pub-journal { color: #FF00FF; }
body.detail-1 .pub-lab { color: #00FFFF; }
body.detail-1 .pub-arrow { color: #FFFF00; }
body.detail-1 .pub-card:hover .pub-arrow { color: #00FF00; }
body.detail-1 .glow-card {
  background: #000066; border: 3px outset #808080;
}
body.detail-1 .glow-card:hover {
  border-style: inset; box-shadow: none;
}

/* Keywords */
body.detail-1 .kw {
  border: 2px outset #808080; color: #00FF00; border-radius: 0;
  font-family: 'Comic Sans MS', 'Comic Sans', 'Chalkboard SE', 'Marker Felt', cursive;
  background: #000066;
}
body.detail-1 .kw:hover {
  border-style: inset; color: #FF00FF;
  background: #000099;
  transform: none; box-shadow: none;
  animation: geocities-blink 0.5s step-end infinite;
}

/* SE cards */
body.detail-1 .se-card {
  background: #000066; border: 3px outset #808080;
  border-left: 3px outset #808080;
}
body.detail-1 .se-card:hover {
  border-style: inset; border-left-style: inset;
}
body.detail-1 .se-score {
  color: #00FF00;
  font-family: 'Comic Sans MS', 'Comic Sans', 'Chalkboard SE', 'Marker Felt', cursive;
}
body.detail-1 .se-card:hover .se-score { text-shadow: none; }
body.detail-1 .se-title {
  color: #FFFFFF;
  font-family: 'Comic Sans MS', 'Comic Sans', 'Chalkboard SE', 'Marker Felt', cursive;
}
body.detail-1 .se-site-name {
  color: #FF00FF;
  font-family: 'Comic Sans MS', 'Comic Sans', 'Chalkboard SE', 'Marker Felt', cursive;
}
body.detail-1 .se-site-rep {
  color: #FFFF00; background: #000099;
  border: 2px outset #808080;
}
body.detail-1 .se-tag {
  color: #00FF00; background: #000099;
  border: 1px outset #808080;
}
body.detail-1 .se-card:hover .se-tag {
  color: #FFFF00; background: #000066; border-style: inset;
}
body.detail-1 .se-type-badge {
  font-family: 'Comic Sans MS', 'Comic Sans', 'Chalkboard SE', 'Marker Felt', cursive;
}
body.detail-1 .se-type-q {
  background: #000099; color: #00FFFF; border: 2px outset #808080;
}
body.detail-1 .se-type-a {
  background: #000099; color: #00FF00; border: 2px outset #808080;
}
body.detail-1 .se-type-accepted {
  background: #00FF00; color: #000033; border: 2px outset #808080;
}
body.detail-1 .se-arrow { color: #FFFF00; }
body.detail-1 .se-card:hover .se-arrow { color: #00FF00; }
body.detail-1 .se-views { color: #00FFFF; }
body.detail-1 .se-vote-label { color: #FFFF00; }

/* Links */
body.detail-1 .lnk {
  background: #000066; border: 3px outset #808080;
  border-bottom: 3px outset #808080;
}
body.detail-1 .lnk:hover {
  background: #000099; border-style: inset;
  box-shadow: none;
}
body.detail-1 .lnk-icon {
  background: #000099; color: #FFFF00;
  border: 2px outset #808080; border-radius: 0;
}
body.detail-1 .lnk:hover .lnk-icon {
  background: #00FF00; color: #000033;
  border-style: inset;
}
body.detail-1 .lnk-name { color: #FFFF00; }
body.detail-1 .lnk-url { color: #00FFFF; }

/* Footer */
body.detail-1 .footer {
  border-top: 3px outset #808080;
  text-align: center; justify-content: center;
}
body.detail-1 .footer-l { color: #FFFF00; }
body.detail-1 .footer-l a { color: #00FF00; }
body.detail-1 .footer-r { color: #00FFFF; }

/* Stat pills */
body.detail-1 .stat {
  background: #000066; border: 2px outset #808080;
  color: #FFFF00;
}
body.detail-1 .stat .val { color: #00FF00; }
body.detail-1 .stat--id { background: #000099; border: 2px outset #808080; }
body.detail-1 .stat--id a { color: #00FF00; }
body.detail-1 .stat--id:hover { background: #000066; border-style: inset; }

/* Toast */
body.detail-1 .detail-toast {
  background: #000066; border: 2px outset #808080; color: #FFFF00;
  font-family: 'Comic Sans MS', 'Comic Sans', 'Chalkboard SE', 'Marker Felt', cursive;
}

/* Scrollbar */
body.detail-1::-webkit-scrollbar-track { background: #000033; }
body.detail-1::-webkit-scrollbar-thumb { background: #FF00FF; }

/* Selection */
body.detail-1 ::selection { background: #FF00FF; color: #FFFF00; }

/* ═══ LEVEL 1: CSS CLOUDS ═══ */
.cloud-sky {
  position: absolute;
  inset: 0;
  z-index: 1;
  pointer-events: none;
  background: linear-gradient(180deg, #6ca0dc 0%, #b0d4f1 60%, #e8f0f8 100%);
  overflow: hidden;
}

.cloud-circle {
  width: 500px;
  height: 275px;
  border-radius: 50%;
  filter: url(#cloud-turbulence);
  position: absolute;
}

.cloud-1 {
  top: -320px; left: -250px;
  box-shadow: 380px 400px 60px 0 rgba(255,255,255,0.9);
  animation: cloud-drift-1 180s ease-in-out infinite alternate;
}
.cloud-2 {
  top: -340px; left: 200px;
  box-shadow: 400px 390px 80px 0 rgba(255,255,255,0.8);
  animation: cloud-drift-2 150s ease-in-out infinite alternate;
}
.cloud-3 {
  top: -300px; right: -100px;
  box-shadow: -300px 360px 50px 0 rgba(255,255,255,0.85);
  animation: cloud-drift-3 200s ease-in-out infinite alternate;
}
.cloud-4 {
  top: -310px; left: 50%;
  box-shadow: -100px 370px 70px 0 rgba(255,255,255,0.7);
  animation: cloud-drift-4 170s ease-in-out infinite alternate;
}
.cloud-5 {
  top: -330px; right: -200px;
  box-shadow: -150px 400px 60px 0 rgba(255,255,255,0.75);
  animation: cloud-drift-5 190s ease-in-out infinite alternate;
}

@keyframes cloud-drift-1 { from { transform: translateZ(0) translateX(0); }   to { transform: translateZ(0) translateX(25px); } }
@keyframes cloud-drift-2 { from { transform: translateZ(0) translateX(0); }   to { transform: translateZ(0) translateX(-20px); } }
@keyframes cloud-drift-3 { from { transform: translateZ(0) translateX(0); }   to { transform: translateZ(0) translateX(15px); } }
@keyframes cloud-drift-4 { from { transform: translateZ(0) translateX(0); }   to { transform: translateZ(0) translateX(-30px); } }
@keyframes cloud-drift-5 { from { transform: translateZ(0) translateX(0); }   to { transform: translateZ(0) translateX(18px); } }

/* ═══ LEVEL 2: BIOLUMINESCENT ═══ */
/* Proximity-driven glow system. The JS hook sets --prox (0–1) based on
   cursor distance, --prox-x/--prox-y for gradient direction, and
   --bio-phase/--bio-phase-g for Weyl-distributed animation offsets. */

/* ── Hero ── */

/* Hero bg: slow drifting gradient pools — deep water caustics */
@keyframes heroGlowDrift {
  0%, 100% { transform: translate(0, 0) scale(1); }
  33% { transform: translate(3%, -2%) scale(1.03); }
  66% { transform: translate(-2%, 2%) scale(1.02); }
}
body.detail-2 .hero-bg {
  background:
    radial-gradient(ellipse at 15% 80%, rgba(0,212,255,0.06) 0%, transparent 55%),
    radial-gradient(ellipse at 85% 20%, rgba(0,255,136,0.04) 0%, transparent 50%),
    radial-gradient(ellipse at 50% 50%, rgba(0,212,255,0.02) 0%, transparent 70%);
  animation: heroGlowDrift 22s ease-in-out infinite;
}

/* Hero name — clean spectral shift, cyan donor → green acceptor */
@keyframes heroNameBreathe {
  0%, 100% {
    color: var(--accent);
    text-shadow: 0 0 20px rgba(0,255,136,0.08), 0 0 60px rgba(0,255,136,0.03);
    filter: drop-shadow(0 0 8px rgba(0,212,255,0.05));
  }
  35% {
    color: #00D4FF;
    text-shadow: 0 0 30px rgba(0,212,255,0.20), 0 0 80px rgba(0,212,255,0.06);
    filter: drop-shadow(0 0 16px rgba(0,212,255,0.12));
  }
  65% {
    color: #00E8A0;
    text-shadow: 0 0 25px rgba(0,255,136,0.15), 0 0 60px rgba(0,255,136,0.05);
    filter: drop-shadow(0 0 12px rgba(0,255,136,0.08));
  }
}
body.detail-2 .hero-name-line.accent {
  animation:
    nameReveal 0.7s cubic-bezier(0.16,1,0.3,1) forwards,
    heroNameBreathe 8s ease-in-out 0.7s infinite;
}

/* ── Snake track — flowing vein ── */
@keyframes trackFlow {
  0%, 100% { background-position: 0 0; }
  50% { background-position: 0 100%; }
}
body.detail-2 .snake-track::before {
  background: linear-gradient(to bottom,
    rgba(0,255,136,0.35), rgba(0,212,255,0.20), rgba(0,255,136,0.35));
  background-size: 100% 200%;
  animation: trackFlow 6s ease-in-out infinite;
}
body.detail-2 .snake-track::after {
  background: linear-gradient(to right,
    rgba(0,255,136,0.25), rgba(0,212,255,0.15));
}

/* ── Proximity glow — shared system for all interactive cards ── */

/* The ::before pseudo creates a radial gradient centered on cursor position.
   Its opacity is driven by --prox (0 far → 1 near). This gives each card
   a soft, directional inner glow that tracks the mouse — like bioluminescent
   organisms reacting to mechanical disturbance in the water. */

body.detail-2 .glow-card,
body.detail-2 .kw {
  --prox: 0;
  --prox-x: 50%;
  --prox-y: 50%;
  position: relative;
  overflow: hidden;
}

/* Card border + shadow respond to proximity via JS-set --prox */
body.detail-2 .snake-card,
body.detail-2 .pub-card,
body.detail-2 .se-card,
body.detail-2 .lnk {
  transition: border-color 0.5s ease-out, box-shadow 0.5s ease-out;
}

body.detail-2 .kw {
  transition: border-color 0.5s ease-out, box-shadow 0.5s ease-out, color 0.5s ease-out;
}

/* ── Hover / touch-hover: full activation ── */
/* When directly hovered, add the enzymatic pulse animation ON TOP of proximity.
   Phase offsets come from --bio-phase (set by JS hook, Weyl-distributed). */

@keyframes bioBreatheCyan {
  0%, 100% { box-shadow: 0 0 8px rgba(0,212,255,0.04), 0 0 20px rgba(0,212,255,0.02); }
  15%      { box-shadow: 0 0 18px rgba(0,212,255,0.12), 0 0 40px rgba(0,212,255,0.05); }
  35%      { box-shadow: 0 0 12px rgba(0,212,255,0.08), 0 0 28px rgba(0,212,255,0.03); }
}
@keyframes bioBreatheGreen {
  0%, 100% { filter: drop-shadow(0 0 6px rgba(0,255,136,0.02)); }
  25%      { filter: drop-shadow(0 0 14px rgba(0,255,136,0.10)); }
  50%      { filter: drop-shadow(0 0 10px rgba(0,255,136,0.06)); }
}

body.detail-2 .snake-card:is(:hover,.th),
body.detail-2 .pub-card:is(:hover,.th),
body.detail-2 .lnk:is(:hover,.th) {
  border-color: rgba(0,212,255,0.20);
  animation:
    bioBreatheCyan 3s ease-in-out var(--bio-phase, 0s) infinite,
    bioBreatheGreen 8.155s ease-in-out var(--bio-phase-g, 0s) infinite;
}

body.detail-2 .se-card:is(:hover,.th) {
  border-color: rgba(0,255,136,0.20);
  animation:
    bioBreatheGreen 3s ease-in-out var(--bio-phase, 0s) infinite,
    bioBreatheCyan 8.155s ease-in-out var(--bio-phase-g, 0s) infinite;
}

body.detail-2 .kw:is(:hover,.th) {
  border-color: rgba(0,212,255,0.25);
  color: var(--text-bright);
  animation:
    bioBreatheCyan 3s ease-in-out var(--bio-phase, 0s) infinite;
}

/* ── Touch-selected: stronger immediate glow for mobile ── */
body.detail-2 .snake-card.th,
body.detail-2 .pub-card.th,
body.detail-2 .lnk.th {
  border-color: rgba(0,212,255,0.40);
  box-shadow: 0 0 24px rgba(0,212,255,0.20), 0 0 48px rgba(0,255,136,0.10);
}
body.detail-2 .se-card.th {
  border-color: rgba(0,255,136,0.40);
  box-shadow: 0 0 24px rgba(0,255,136,0.20), 0 0 48px rgba(0,212,255,0.10);
}
body.detail-2 .kw.th {
  border-color: rgba(0,212,255,0.50);
  box-shadow: 0 0 16px rgba(0,212,255,0.20);
}

/* ── Text glow on hover — spectral color shift ── */
@keyframes textSpectrumShift {
  0%, 100% { color: var(--cyan); text-shadow: 0 0 8px rgba(0,212,255,0.12); }
  40%      { color: #00E8B0; text-shadow: 0 0 14px rgba(0,232,180,0.18); }
  70%      { color: var(--accent); text-shadow: 0 0 10px rgba(0,255,136,0.14); }
}
@keyframes textSpectrumShiftReverse {
  0%, 100% { color: var(--accent); text-shadow: 0 0 8px rgba(0,255,136,0.12); }
  40%      { color: #00E8B0; text-shadow: 0 0 14px rgba(0,232,180,0.18); }
  70%      { color: var(--cyan); text-shadow: 0 0 10px rgba(0,212,255,0.14); }
}

body.detail-2 .snake-card:is(:hover,.th) .snake-role,
body.detail-2 .pub-card:is(:hover,.th) .pub-year,
body.detail-2 .pub-card:is(:hover,.th) .pub-type,
body.detail-2 .pub-card:is(:hover,.th) .pub-arrow,
body.detail-2 .lnk:is(:hover,.th) .lnk-icon {
  animation: textSpectrumShift 4s ease-in-out var(--bio-phase, 0s) infinite;
}
body.detail-2 .pub-card:is(:hover,.th) .pub-type {
  border-color: var(--border);
  background: transparent;
}

body.detail-2 .se-card:is(:hover,.th) .se-score,
body.detail-2 .se-card:is(:hover,.th) .se-tag,
body.detail-2 .se-card:is(:hover,.th) .se-arrow {
  animation: textSpectrumShiftReverse 4s ease-in-out var(--bio-phase, 0s) infinite;
}
body.detail-2 .se-card:is(:hover,.th) .se-tag {
  border-color: rgba(0,255,136,0.12);
  background: rgba(0,255,136,0.04);
}

body.detail-2 .lnk:is(:hover,.th) .lnk-icon {
  background: var(--bg-elevated);
  color: var(--text-dim);
  border-color: var(--border);
}

/* ── Ambient breathing — section lines + snake tracks ── */
/* Weyl-detuned via --bio-dur (set by JS) for desynchronized colony effect */
@keyframes ambientPulse {
  0%, 100% { opacity: 0.4; }
  12%      { opacity: 0.9; }
  30%      { opacity: 0.65; }
}

body.detail-2 .sec-line {
  animation: ambientPulse var(--bio-dur, 5s) ease-in-out infinite;
}
body.detail-2 .snake-track {
  animation: ambientPulse var(--bio-dur, 5s) ease-in-out infinite;
}

/* ═══ LEVEL 3: EDITORIAL OVERDRIVE ═══ */

/* Kill decorative elements outside hero */
body.detail-3 .dna-canvas { display: none; }
body.detail-3 .hero-grid { display: none; }

@keyframes splatGlow1 {
  0%, 100% { opacity: 0; }
  35%, 65% { opacity: 1; }
}
@keyframes splatGlow2 {
  0%, 100% { opacity: 0; }
  25%, 55% { opacity: 1; }
}

/* CRT flicker — two independent layers whose duration ratio is φ (golden ratio).
   φ ≈ 1.618 is the "most irrational" number: its continued fraction [1;1,1,1,...]
   converges slower than any other, so these oscillators take the longest possible
   time to near-sync (~96s before a close alignment). Phase offsets for always-on
   elements use the R₂ low-discrepancy sequence (plastic constant) — see App.jsx. */

/* Layer 1: Power sag — tube loses charge after surges */
@keyframes crtDim {
  0%, 18%, 52%, 75%, 100% { opacity: 1; }
  4%    { opacity: 0.35; }
  7%    { opacity: 0.25; }
  12%   { opacity: 0.6; }
  56%   { opacity: 0.3; }
  60%   { opacity: 0.25; }
  68%   { opacity: 0.65; }
}

/* Layer 2: Chromatic split — pink flares left, cyan reacts right */
@keyframes crtSplit {
  0%, 14%, 30%, 70%, 88%, 100% {
    text-shadow: 0 0 0.05em var(--accent), 0 0 0.15em rgba(255,0,110,0.3),
      -0.02em 0 0 rgba(255,0,110,0.2), 0.03em 0 0 rgba(0,212,255,0.3);
  }
  7%  { text-shadow: 0 0 0.15em var(--accent), 0 0 0.5em rgba(255,0,110,0.6),
      -0.03em 0 0 rgba(255,0,110,0.5), 0.02em 0 0 rgba(0,212,255,0.2); }
  9%  { text-shadow: -0.1em 0 rgba(255,0,110,0.9), 0.07em 0 rgba(0,212,255,0.5),
      0 0 0.6em rgba(255,0,110,0.5), 0 0 0.3em rgba(0,212,255,0.15); }
  11% { text-shadow: -0.06em 0 rgba(255,0,110,0.6), 0.04em 0 rgba(0,212,255,0.35),
      0 0 0.3em rgba(255,0,110,0.3); }
  17% { text-shadow: none; }
  22% { text-shadow: 0 0 0.02em var(--accent); }
  62% { text-shadow: 0 0 0.2em var(--accent), 0 0 0.6em rgba(255,0,110,0.5),
      -0.03em 0 0 rgba(255,0,110,0.5), 0.02em 0 0 rgba(0,212,255,0.2); }
  64% { text-shadow: -0.14em 0 rgba(255,0,110,0.85), 0.09em 0 rgba(0,212,255,0.45),
      0 0 0.7em rgba(255,0,110,0.5), 0 0 0.3em rgba(0,212,255,0.15); }
  66% { text-shadow: -0.08em 0 rgba(255,0,110,0.6), 0.05em 0 rgba(0,212,255,0.35),
      0 0 0.2em rgba(255,0,110,0.3); }
  73% { text-shadow: none; }
  80% { text-shadow: 0 0 0.02em var(--accent); }
}


/* Card CRT glitch — full-width horizontal band displacement on hover */
/* Cathode noise — SVG feTurbulence displacement filter (see App.jsx #crt-noise).
   Ken Perlin's gradient noise generates fractal Brownian motion (fBm) that warps
   card pixels horizontally, exactly like real CRT signal interference. Asymmetric
   baseFrequency (low X, high Y) creates coherent horizontal banding per scan line.
   The seed attribute cycles discretely for jittery, non-repeating pattern changes. */

/* Body — elegant serif that technology keeps breaking */
body.detail-3 {
  font-family: Georgia, 'Times New Roman', serif;
  -webkit-font-smoothing: antialiased;
}

/* Hero — CRT monitor embedded in editorial page */
body.detail-3 .hero {
  padding: 4rem 2rem 3rem;
  background: #050508;
  position: relative;
}
body.detail-3 .hero::after {
  content: '';
  position: absolute; inset: 0;
  background: repeating-linear-gradient(
    0deg,
    transparent 0px,
    transparent 2px,
    rgba(0,0,0,0.12) 2px,
    rgba(0,0,0,0.12) 4px
  );
  pointer-events: none; z-index: 3;
}
body.detail-3 .hero-bg {
  background:
    /* main splash cluster — always visible */
    radial-gradient(circle at 78% 42%, rgba(255,0,110,0.2) 0%, rgba(255,0,110,0.2) 7%, transparent 7.5%),
    radial-gradient(circle at 83% 50%, rgba(255,0,110,0.12) 0%, rgba(255,0,110,0.12) 11%, transparent 11.5%),
    radial-gradient(circle at 71% 36%, rgba(255,0,110,0.15) 0%, rgba(255,0,110,0.15) 5%, transparent 5.5%),
    radial-gradient(circle at 76% 55%, rgba(255,0,110,0.1) 0%, rgba(255,0,110,0.1) 9%, transparent 9.5%),
    /* flung droplets */
    radial-gradient(circle at 90% 30%, rgba(255,0,110,0.25) 0%, rgba(255,0,110,0.25) 1.5%, transparent 2%),
    radial-gradient(circle at 65% 58%, rgba(255,0,110,0.2) 0%, rgba(255,0,110,0.2) 2%, transparent 2.5%),
    radial-gradient(circle at 88% 62%, rgba(255,0,110,0.18) 0%, rgba(255,0,110,0.18) 1%, transparent 1.5%),
    radial-gradient(circle at 92% 44%, rgba(255,0,110,0.15) 0%, rgba(255,0,110,0.15) 0.8%, transparent 1.3%),
    radial-gradient(circle at 62% 28%, rgba(255,0,110,0.2) 0%, rgba(255,0,110,0.2) 1.2%, transparent 1.7%),
    /* cyan spatter */
    radial-gradient(circle at 85% 38%, rgba(0,212,255,0.1) 0%, rgba(0,212,255,0.1) 3%, transparent 3.5%),
    radial-gradient(circle at 74% 48%, rgba(0,212,255,0.06) 0%, transparent 15%);
}
/* Async glow layers — brighten different parts of the splash at different rates */
body.detail-3 .hero-bg::before {
  content: ''; position: absolute; inset: 0; pointer-events: none;
  animation: splatGlow1 7s ease-in-out infinite;
  background:
    radial-gradient(circle at 78% 42%, rgba(255,0,110,0.2) 0%, rgba(255,0,110,0.2) 8%, transparent 8.5%),
    radial-gradient(circle at 71% 36%, rgba(255,0,110,0.18) 0%, rgba(255,0,110,0.18) 6%, transparent 6.5%),
    radial-gradient(circle at 90% 30%, rgba(255,0,110,0.25) 0%, rgba(255,0,110,0.25) 2%, transparent 2.5%),
    radial-gradient(circle at 88% 62%, rgba(255,0,110,0.2) 0%, rgba(255,0,110,0.2) 1.5%, transparent 2%);
}
body.detail-3 .hero-bg::after {
  content: ''; position: absolute; inset: 0; pointer-events: none;
  animation: splatGlow2 11s ease-in-out infinite;
  background:
    radial-gradient(circle at 83% 50%, rgba(255,0,110,0.2) 0%, rgba(255,0,110,0.2) 12%, transparent 12.5%),
    radial-gradient(circle at 76% 55%, rgba(255,0,110,0.15) 0%, rgba(255,0,110,0.15) 10%, transparent 10.5%),
    radial-gradient(circle at 65% 58%, rgba(255,0,110,0.22) 0%, rgba(255,0,110,0.22) 2.5%, transparent 3%),
    radial-gradient(circle at 85% 38%, rgba(0,212,255,0.15) 0%, rgba(0,212,255,0.15) 4%, transparent 4.5%);
}
body.detail-3 .hero-prompt {
  display: block; color: var(--accent); opacity: 0.7;
}
body.detail-3 .hero-name {
  font-size: clamp(3rem, 9vw, 5.5rem);
  line-height: 0.88; letter-spacing: -0.06em;
  margin-bottom: 1rem;
}
body.detail-3 .hero-name-line {
  animation: none; opacity: 1;
  color: #C8CCD8;
  text-transform: uppercase;
}
body.detail-3 .hero-name-line.accent {
  color: var(--accent);
  text-shadow:
    0 0 0.05em var(--accent),
    0 0 0.15em var(--accent),
    0 0 0.5em rgba(255,0,110,0.4),
    0 0 1em rgba(255,0,110,0.2),
    -0.03em 0 0 rgba(255,0,110,0.3),
    0.03em 0 0 rgba(0,212,255,0.3);

  animation: crtDim 4s ease-in-out infinite, crtSplit 6.472s ease-in-out infinite;
  filter: url(#crt-noise-lg);
  transform: translateZ(0);
}
body.detail-3 .hero-bio {
  animation: none; opacity: 1;
  font-size: 0.8rem; max-width: 520px;
  color: #8890A4; line-height: 1.75;
  border-left: 3px solid rgba(255,0,110,0.4);
  padding-left: 1.25rem;
}
body.detail-3 .hero-bio strong { color: #C8CCD8; }
body.detail-3 .hero-stats { animation: none; opacity: 1; }
body.detail-3 .hero .stat {
  background: rgba(255,255,255,0.04); border-color: rgba(255,255,255,0.08); color: #8890A4;
}
body.detail-3 .hero .stat .val { color: var(--accent); }
body.detail-3 .hero .stat--id { background: rgba(255,0,110,0.1); border-color: rgba(255,0,110,0.2); }
body.detail-3 .hero .stat--id a { color: var(--accent); }
body.detail-3 .hero .stat--id:is(:hover,.th) { background: rgba(255,0,110,0.15); }

/* Portfolio — no fade-in */
body.detail-3 .portfolio { animation: none; opacity: 1; }
body.detail-3 .reveal { opacity: 1; transform: none; transition: all 0s; }

/* Nav — minimal top bar */
body.detail-3 .nav {
  background: var(--bg); backdrop-filter: none;
  border-bottom: 2px solid #000;
}
body.detail-3 .nav-a {
  font-family: 'Syne', sans-serif;
  color: #000; font-weight: 700;
  text-transform: uppercase; letter-spacing: 0.12em;
  transition: all 0s;
  overflow: hidden;
}
body.detail-3 .nav-a:is(:hover,.th) {
  color: var(--accent);
  animation: crtDim 4s ease-in-out infinite, crtSplit 6.472s ease-in-out infinite;
}
body.detail-3 .nav-a:is(:hover,.th)::after {
  background: linear-gradient(90deg, rgba(255,0,110,0.6), rgba(0,212,255,0.6));
  box-shadow: none;
}
body.detail-3 .nav-lvl {
  font-family: 'Syne', sans-serif;
  border: 2px solid #000; color: #000;
}
body.detail-3 .nav-lvl:is(:hover,.th) { border-color: #000; color: var(--accent); }
body.detail-3 .nav-lvl.active {
  background: var(--accent); color: #fff;
  border-color: var(--accent);
}

/* Section heads — oversized background numbers (trash polka) */
body.detail-3 .sec-head { position: relative; overflow: visible; }
body.detail-3 .sec-label {
  display: block; position: absolute;
  font-family: 'Syne', sans-serif;
  font-size: 8rem; font-weight: 800;
  color: rgba(255, 0, 110, 0.05);
  right: -1rem; top: 50%; transform: translateY(-50%);
  line-height: 1; pointer-events: none; z-index: 0;
}
body.detail-3 .sec-title {
  font-size: 3rem; font-weight: 800;
  text-transform: uppercase; letter-spacing: -0.03em;
  color: #000; position: relative; display: inline-block;
}
body.detail-3 .sec-title::after {
  content: '';
  position: absolute; bottom: 0.15em; left: -0.05em; right: -0.05em;
  height: 0.4em; background: var(--accent); opacity: 0.35;
  z-index: -1; transform: skewX(-3deg);
}
body.detail-3 .sec-line { background: #000; height: 2px; }

/* Stats — stark pills */
body.detail-3 .stat {
  font-family: 'Syne', sans-serif;
  background: transparent; border: 2px solid #000; color: #000;
}
body.detail-3 .stat .val { color: var(--accent); }
body.detail-3 .stat--id { background: var(--accent); border-color: var(--accent); }
body.detail-3 .stat--id a { color: #fff; }
body.detail-3 .stat--id:is(:hover,.th) { background: #000; border-color: #000; }
body.detail-3 .stat--id:is(:hover,.th) a { color: #fff; }

/* Timeline — clean, no card chrome */
body.detail-3 .snake-card {
  background: transparent; border-radius: 0;
  border-bottom: 1px solid rgba(0,0,0,0.1);
  overflow: hidden;
  transition: transform 0.3s cubic-bezier(0.16,1,0.3,1), box-shadow 0.3s;
}
body.detail-3 .snake-card:is(:hover,.th) {
  background: transparent;
}
body.detail-3 .snake-card:is(:hover,.th) .snake-role {
  color: var(--accent);
  animation: crtDim 4s ease-in-out infinite, crtSplit 6.472s ease-in-out infinite;
}
body.detail-3 .snake-card:is(:hover,.th) .snake-dates { color: #999; }
body.detail-3 .snake-role {
  font-size: 1.1rem; font-weight: 700;
  text-transform: none; letter-spacing: 0;
  color: #000;
}
body.detail-3 .snake-org { color: #3A3330; font-weight: 600; }
body.detail-3 .snake-dates { color: #999; }
body.detail-3 .snake-dept { color: #666; }
body.detail-3 .snake-node { border-color: #000; background: var(--bg); }
body.detail-3 .snake-node.now {
  border-color: var(--accent); background: var(--accent);
  box-shadow: none; animation: none;
}
body.detail-3 .snake-track::before { background: #000; }
body.detail-3 .snake-track::after { background: #000; }

/* Pub cards — heavy top border, no surface color */
body.detail-3 .pub-card {
  background: transparent;
  border-top: 4px solid #000;
  transition: transform 0.3s cubic-bezier(0.16,1,0.3,1), box-shadow 0.3s;
}
body.detail-3 .pub-card:is(:hover,.th) {
  border-top-color: #000;
}
body.detail-3 .pub-year {
  color: var(--accent); font-size: 1.5rem; font-weight: 800;
}
body.detail-3 .pub-card:is(:hover,.th) .pub-year {
  animation: crtDim 4s ease-in-out infinite, crtSplit 6.472s ease-in-out infinite;
}
body.detail-3 .pub-title {
  font-family: Georgia, 'Times New Roman', serif;
  font-size: 0.9rem; font-weight: normal; color: #1A1A1A;
  text-transform: none; letter-spacing: 0; line-height: 1.6;
  font-style: italic;
}
body.detail-3 .pub-type {
  color: #999; border-color: #999;
  font-weight: 700;
}
body.detail-3 .pub-card:is(:hover,.th) .pub-type {
  border-color: #999; color: #999; background: transparent;
}
body.detail-3 .pub-journal { color: #555; font-style: normal; font-weight: 700; }
body.detail-3 .pub-lab { color: #999; }
body.detail-3 .pub-arrow { color: #000; }
body.detail-3 .pub-card:is(:hover,.th) .pub-arrow { color: #000; }
/* Chromatic text aberration on hover — residual CRT bleed */
body.detail-3 .snake-card:is(:hover,.th) .snake-role,
body.detail-3 .pub-card:is(:hover,.th) .pub-title,
body.detail-3 .se-card:is(:hover,.th) .se-title,
body.detail-3 .kw:is(:hover,.th),
body.detail-3 .lnk:is(:hover,.th) .lnk-name {
  text-shadow: -0.03em 0 rgba(255,0,110,0.4), 0.03em 0 rgba(0,212,255,0.4);
}

body.detail-3 .glow-card { background: transparent; transition: transform 0.3s cubic-bezier(0.16,1,0.3,1), box-shadow 0.3s; }
body.detail-3 .glow-card:is(:hover,.th) { border-color: rgba(0,0,0,0.08); box-shadow: none; }

/* Settled hover — lifted with chromatic split shadow (a la Ward) */
body.detail-3 .snake-card:is(:hover,.th),
body.detail-3 .pub-card:is(:hover,.th),
body.detail-3 .se-card:is(:hover,.th),
body.detail-3 .kw:is(:hover,.th),
body.detail-3 .lnk:is(:hover,.th) {
  transform: translateY(-3px);
  box-shadow: -0.15em 0 0 rgba(255,0,110,0.3), 0.15em 0 0 rgba(0,212,255,0.3);
}

/* CRT displacement noise on hover — applied via SVG filter */
body.detail-3 .snake-card:is(:hover,.th),
body.detail-3 .pub-card:is(:hover,.th),
body.detail-3 .se-card:is(:hover,.th),
body.detail-3 .lnk:is(:hover,.th),
body.detail-3 .kw:is(:hover,.th),
body.detail-3 .nav-a:is(:hover,.th) {
  filter: url(#crt-noise);
  transform: translateZ(0); /* Safari: force own compositing layer to fix feTurbulence render lines */
}

/* CRT scanline overlay — card becomes a monitor on hover */
body.detail-3 .snake-card::before,
body.detail-3 .pub-card::before,
body.detail-3 .se-card::before,
body.detail-3 .lnk::before,
body.detail-3 .kw::before {
  content: '';
  display: block;
  position: absolute;
  inset: 0;
  background:
    repeating-linear-gradient(
      0deg,
      transparent 0px,
      transparent 1px,
      rgba(0,0,0,0.012) 1px,
      rgba(0,0,0,0.012) 2px
    ),
    repeating-linear-gradient(
      90deg,
      rgba(255,0,110,0.02) 0px,
      rgba(0,212,255,0.015) 1px,
      transparent 2px,
      transparent 3px
    );
  pointer-events: none;
  z-index: 12;
  opacity: 0;
}
body.detail-3 .snake-card:is(:hover,.th)::before,
body.detail-3 .pub-card:is(:hover,.th)::before,
body.detail-3 .se-card:is(:hover,.th)::before,
body.detail-3 .lnk:is(:hover,.th)::before,
body.detail-3 .kw:is(:hover,.th)::before {
  opacity: 1;
}

/* Keywords — large, stark pills */
body.detail-3 .kw {
  border: 2px solid #000; border-radius: 0;
  color: #000; font-weight: 600; font-size: 0.75rem;
  text-transform: none; letter-spacing: 0;
  padding: 0.5rem 1.2rem;
  background: transparent;
  transition: all 0s;
  position: relative; overflow: hidden;
}
body.detail-3 .kw:is(:hover,.th) {
  background: transparent; color: var(--accent);
  border-color: #000;
  animation: crtDim 4s ease-in-out infinite, crtSplit 6.472s ease-in-out infinite;
}

/* SE cards — minimal with left accent */
body.detail-3 .se-card {
  background: transparent;
  border-left: 3px solid #000;
  position: relative; overflow: hidden;
  transition: transform 0.3s cubic-bezier(0.16,1,0.3,1), box-shadow 0.3s;
}
body.detail-3 .se-card:is(:hover,.th) {
  border-left-color: #000;
}
body.detail-3 .se-score { color: var(--accent); }
body.detail-3 .se-card:is(:hover,.th) .se-score {
  animation: crtDim 4s ease-in-out infinite, crtSplit 6.472s ease-in-out infinite;
}
body.detail-3 .se-title {
  font-family: Georgia, 'Times New Roman', serif;
  color: #000; font-weight: normal; text-transform: none; line-height: 1.6;
}
body.detail-3 .se-site-name { color: #000; }
body.detail-3 .se-site-rep { color: var(--accent); background: rgba(255,0,110,0.06); border-color: rgba(255,0,110,0.2); }
body.detail-3 .se-tag { color: #555; background: transparent; border-color: #ccc; }
body.detail-3 .se-card:is(:hover,.th) .se-tag { border-color: #ccc; color: #555; background: transparent; }
body.detail-3 .se-type-q { background: transparent; color: #000; border: 2px solid #000; }
body.detail-3 .se-type-a { background: transparent; color: var(--accent); border: 2px solid var(--accent); }
body.detail-3 .se-type-accepted { background: var(--accent); color: #fff; border-color: var(--accent); }
body.detail-3 .se-arrow { color: #000; }
body.detail-3 .se-card:is(:hover,.th) .se-arrow { color: #000; }
body.detail-3 .se-views { color: #555; }
body.detail-3 .se-vote-label { color: #999; }

/* Links — underline style, no card */
body.detail-3 .lnk {
  background: transparent; border-bottom: 2px solid #000;
  transition: transform 0.3s cubic-bezier(0.16,1,0.3,1), box-shadow 0.3s;
}
body.detail-3 .lnk:is(:hover,.th) {
  border-bottom-color: #000; background: transparent;
}
body.detail-3 .lnk-icon {
  background: #000; color: #fff; border: none;
  border-radius: 0;
}
body.detail-3 .lnk:is(:hover,.th) .lnk-icon {
  background: #000; color: #fff; border-color: transparent;
}
body.detail-3 .lnk-name { color: #000; }
body.detail-3 .lnk-url { color: #999; }

/* Footer */
body.detail-3 .footer { border-top: 2px solid #000; }
body.detail-3 .footer-l { color: #999; }
body.detail-3 .footer-l a { color: var(--accent); }
body.detail-3 .footer-r { color: #999; }

/* Selection — chromatic aberration */
body.detail-3 ::selection {
  background: var(--accent);
  color: #fff;
  text-shadow: -0.06em 0 #FF006E, 0.06em 0 #00D4FF;
}

/* Scrollbar */
body.detail-3::-webkit-scrollbar-track { background: var(--bg); }
body.detail-3::-webkit-scrollbar-thumb { background: var(--accent); }

/* Toast */
body.detail-3 .detail-toast {
  background: #000; border: none; color: #fff;
  font-weight: 700; text-transform: uppercase; letter-spacing: 0.12em;
}

/* ═══ LEVEL 4: ggplot(my_resume) ═══ */
body.detail-4 {
  --bg: #FFFFFF;
  --bg-surface: #FFFFFF;
  --bg-elevated: #F5F5F5;
  --bg-glass: rgba(255, 255, 255, 0.95);
  --bg-hover: #F0F0F0;
  --accent: #4D4D4D;
  --accent-dim: rgba(77, 77, 77, 0.1);
  --accent-glow: rgba(77, 77, 77, 0.05);
  --accent-bright: rgba(77, 77, 77, 0.2);
  --border: rgba(0, 0, 0, 0.1);
  --border-accent: rgba(77, 77, 77, 0.3);
  --text: #1A1A1A;
  --text-bright: #000000;
  --text-dim: #4D4D4D;
  --text-ghost: #808080;
  --track: #4D4D4D;
  --reveal-duration: 0s;
  --reveal-ease: linear;
  --hover-lift: 0px;
  --glow-mult: 0;
  font-family: Helvetica, Arial, sans-serif;
  background: #FFFFFF;
  color: #1A1A1A;
}

body.detail-4 .portfolio { animation: none; opacity: 1; }
body.detail-4 .reveal { opacity: 1; transform: none; transition: none; }
body.detail-4 .dna-canvas { display: none; }
body.detail-4 .hero-bg { display: none; }
body.detail-4 .hero-grid { display: none; }

/* Hero — R console style */
body.detail-4 .hero {
  padding: 4rem 2rem 3rem;
  background: #FFFFFF;
  border-bottom: 1px solid #EBEBEB;
}
body.detail-4 .hero-name {
  font-family: Helvetica, Arial, sans-serif;
  font-size: clamp(2rem, 5vw, 3.5rem);
  font-weight: 700;
  line-height: 1.1;
  letter-spacing: -0.02em;
  margin-bottom: 0.5rem;
}
body.detail-4 .hero-name-line {
  animation: none; opacity: 1;
  color: #1A1A1A;
}
body.detail-4 .hero-name-line.accent {
  color: #1A1A1A;
  text-shadow: none;
}
body.detail-4 .hero-bio {
  animation: none; opacity: 1;
  font-size: 0.85rem;
  color: #4D4D4D;
  border: none; padding: 0;
  max-width: none;
}
body.detail-4 .hero-stats { display: none; }
body.detail-4 .hero-prompt { display: none; }
body.detail-4 .hero-bio { display: none; }
body.detail-4 .gg-hero-terminal {
  margin-bottom: 1rem;
}
.gg-hero-name .gg-term-comment {
  font-size: 1.6rem;
  font-weight: 700;
  color: #3CD6C2;
  letter-spacing: -0.01em;
}

/* Nav — ggplot legend style */
body.detail-4 .nav {
  background: #FFFFFF;
  backdrop-filter: none;
  border-bottom: 1px solid #EBEBEB;
}
body.detail-4 .nav-a {
  color: #4D4D4D;
  font-family: Helvetica, Arial, sans-serif;
  text-transform: none;
  letter-spacing: 0;
  font-size: 0.75rem;
}
body.detail-4 .nav-a:hover { color: #000; }
body.detail-4 .nav-a:hover::after { background: #4D4D4D; box-shadow: none; }
body.detail-4 .nav-lvl {
  font-family: Helvetica, Arial, sans-serif;
  border-color: #D9D9D9;
  color: #808080;
  border-radius: 0;
}
body.detail-4 .nav-lvl:hover {
  border-color: #4D4D4D;
  color: #1A1A1A;
}
body.detail-4 .nav-lvl.active {
  background: #4D4D4D;
  color: #FFFFFF;
  border-color: #4D4D4D;
}

/* Sections — no decorative headers on level 4, charts handle their own padding */
body.detail-4 .section {
  max-width: 880px;
  padding-left: 2rem;
  padding-right: 2rem;
}

/* Footer */
body.detail-4 .footer { border-top-color: #EBEBEB; }
body.detail-4 .footer-l { color: #808080; }
body.detail-4 .footer-l a { color: #4D4D4D; }
body.detail-4 .footer-r { color: #808080; }

/* Toast */
body.detail-4 .detail-toast {
  background: #FFFFFF;
  border: 1px solid #EBEBEB;
  color: #4D4D4D;
  font-family: 'Space Mono', monospace;
}

/* Scrollbar */
body.detail-4::-webkit-scrollbar-track { background: #FFFFFF; }
body.detail-4::-webkit-scrollbar-thumb { background: #D9D9D9; }

/* ═══ GGPLOT PANEL COMPONENTS ═══ */
.gg-panel {
  margin-bottom: 2rem;
  width: 100%;
}
.gg-plot-title {
  font-family: Helvetica, Arial, sans-serif;
  font-size: 13px;
  font-weight: 700;
  fill: #1A1A1A;
}
.gg-axis-label {
  font-family: Helvetica, Arial, sans-serif;
  font-size: 10px;
  fill: #4D4D4D;
}
.gg-axis-title {
  font-family: Helvetica, Arial, sans-serif;
  font-size: 11px;
  fill: #1A1A1A;
  font-weight: 600;
}
/* Ephemeral Nocturne terminal — used above every chart and for R output */
.gg-terminal {
  background: #090909;
  color: #D8D8D8;
  font-family: 'Space Mono', monospace;
  font-size: 0.75rem;
  line-height: 1.7;
  padding: 0.6rem 1rem;
  overflow-x: auto;
  margin-bottom: 1rem;
  border-radius: 6px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.3);
}
.gg-terminal::before {
  content: '';
  display: block;
  margin-bottom: 0.5rem;
  background:
    radial-gradient(circle at 6px 6px, #FF5F56 5px, transparent 5px),
    radial-gradient(circle at 22px 6px, #FFBD2E 5px, transparent 5px),
    radial-gradient(circle at 38px 6px, #27C93F 5px, transparent 5px);
  height: 12px;
  width: 50px;
}
.gg-term-line {
  white-space: pre-wrap;
  word-break: break-word;
}
.gg-term-prompt {
  color: #66CD00;
}
.gg-term-code {
  color: #D8D8D8;
}
.gg-term-string {
  color: #CDAD00;
  white-space: pre-wrap;
}
.gg-term-index {
  color: #5C5C5C;
}
.gg-term-comment {
  color: #5C5C5C;
  font-style: italic;
}
.gg-legend {
  display: flex;
  justify-content: center;
  gap: 1.5rem;
  padding: 0.5rem 0;
}
.gg-legend-items {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}
.gg-legend-item {
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
  font-family: Helvetica, Arial, sans-serif;
  font-size: 0.7rem;
  color: #4D4D4D;
}
.gg-legend-swatch {
  display: inline-block;
  width: 12px;
  height: 12px;
  flex-shrink: 0;
}
.gg-panel svg g {
  transition: opacity 0.25s ease;
}
.gg-panel svg rect,
.gg-panel svg circle,
.gg-panel svg line {
  transition: all 0.35s ease;
}
.gg-panel svg text {
  transition: x 0.35s ease, y 0.35s ease, opacity 0.25s ease;
}
.gg-panel svg polygon,
.gg-panel svg path {
  transition: opacity 0.25s ease;
}

.gg-tooltip {
  position: absolute;
  pointer-events: none;
  z-index: 10;
  background: rgba(0, 0, 0, 0.88);
  color: #FFFFFF;
  padding: 0.5rem 0.75rem;
  border-radius: 4px;
  font-family: Helvetica, Arial, sans-serif;
  font-size: 0.75rem;
  line-height: 1.5;
  max-width: 300px;
  white-space: normal;
  transform: translate(12px, -50%);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}
.gg-tooltip-title {
  font-weight: 700;
  margin-bottom: 0.15rem;
}
.gg-tooltip-detail {
  color: rgba(255, 255, 255, 0.75);
  font-size: 0.7rem;
}
.gg-legend-rows {
  display: flex;
  gap: 1.5rem;
  justify-content: center;
}
.gg-legend-heading {
  font-weight: 700;
  font-size: 0.7rem;
  color: #1A1A1A;
  font-family: Helvetica, Arial, sans-serif;
  margin-bottom: 0.1rem;
}
.gg-legend-shape {
  fill: #4D4D4D;
  stroke: #4D4D4D;
  flex-shrink: 0;
}

/* ═══ DETAIL TOAST ═══ */
.detail-toast {
  position: fixed; bottom: 2rem; left: 50%; transform: translateX(-50%);
  padding: 0.5rem 1.2rem;
  background: var(--bg-elevated); border: 1px solid var(--border-accent);
  color: var(--accent); font-size: 0.65rem; letter-spacing: 0.1em;
  font-family: 'Space Mono', monospace;
  z-index: 9999; pointer-events: none;
  opacity: 0; transition: opacity 0.3s;
}
.detail-toast.visible { opacity: 1; }

/* ═══ RESPONSIVE ═══ */
@media (max-width: 768px) {
  .hero { padding: 3rem 1.5rem 2.5rem; }
  .section { padding: 2.5rem 1.5rem; }
  .dna-canvas { opacity: 0.4; }
  .snake-row { grid-template-columns: 24px 1fr; }
  .snake-track { grid-column: 1; }
  .snake-track::after { left: 50% !important; right: auto !important; width: 50%; }
  .snake-card.left, .snake-card.right {
    grid-column: 2; grid-row: 1; text-align: left;
    border-left-color: var(--track); border-right-color: var(--border);
    margin: 0.35rem 0;
  }
  .pub-grid { grid-template-columns: 1fr; }
  .se-site-line { display: none; }
  .se-site-stats { display: none; }
  .se-votes { width: 40px; }
  .se-score { font-size: 1.2rem; }
  .nav-inner { flex-wrap: wrap; }
  .nav-a { padding: 0.7rem 0.7rem; font-size: 0.6rem; }
  .footer { flex-direction: column; text-align: center; }
  /* Level 3 mobile — tame section titles */
  body.detail-3 .sec-title { font-size: 1.8rem; }
  body.detail-3 .sec-label { font-size: 4rem; right: -0.5rem; }
  /* Level 4 — charts scale to fit, no horizontal scroll */
  .gg-legend-items { gap: 0.2rem; }
  .gg-legend-item { font-size: 0.6rem; }
  .gg-legend-swatch { width: 10px; height: 10px; }
}
@media (max-width: 480px) {
  .hero-stats { flex-direction: column; }
  .stat { justify-content: center; }
}
